<style>
  @-webkit-keyframes argh-my-eyes {
    0% {
      background-color: #fff;
    }

    49% {
      background-color: #fff;
    }

    50% {
      background-color: #000;
    }

    99% {
      background-color: #000;
    }

    100% {
      background-color: #fff;
    }
  }

  @-moz-keyframes argh-my-eyes {
    0% {
      background-color: #fff;
    }

    49% {
      background-color: #fff;
    }

    50% {
      background-color: #000;
    }

    99% {
      background-color: #000;
    }

    100% {
      background-color: #fff;
    }
  }

  @keyframes argh-my-eyes {
    0% {
      background-color: #fff;
    }

    49% {
      background-color: #fff;
    }

    50% {
      background-color: #000;
    }

    99% {
      background-color: #000;
    }

    100% {
      background-color: #fff;
    }
  }

  .flash {
    -webkit-animation: argh-my-eyes 1s infinite;
    -moz-animation: argh-my-eyes 1s infinite;
    animation: argh-my-eyes 1s infinite;
  }

  ::-webkit-scrollbar {
    width: 5px;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
    background: #5ba246;
    border-radius: 10px;
  }
</style>

<layout>
  <div class="az-content az-content-dashboard" style="padding-top: 5px;">
    <div class="container">
      <div class="az-content-body">
        <div class="d-flex justify-content-between" style="max-height: 25px;">
          <style>
            .ddl {
              max-height: 300px;
              width: 250px;
              position: absolute;
              overflow-y: auto;
              overflow-x: hidden;
              z-index: 999;
              margin-top: 10px;
              background: white;
            }
          </style>

          <div class="dropdown">
            <a class="btn"
              style="min-height: 25px;width: 90px; padding: 0; background: white;border: solid 0.2px; border-radius: 8px;"
              (click)="toggle()">Customise</a>

            <div class="ddl" [style.display]="isHidden ? 'none': 'block' "
              [style.border]="isHidden ? 'none': '0.2px solid' " [style.padding]="isHidden ? '0': '10px 15px' ">
              <app-distributordashboardsettings></app-distributordashboardsettings>
            </div>
          </div>
          <div class="grp-btns" style="display: flex;justify-content: flex-end;">

            <div [ngClass]="{ 'flash': criticalSerReq != 0 }"
              style="height: 25px;margin-right: 15px; border-radius: 15px;">
              <a type="button" (click)="CriticalSerReq()"
                style="background-color: transparent;padding: 0;margin: -15px 25px 0 0; border: none; color: #e24520;">
                <p *ngIf="criticalSerReq != 0" style="color: black; background-color: lavender;
                    border-radius: 6px;
                    height: 19px;
                    width: 18px;
                    font-size: 13px;
                    position: relative;
                    z-index: 1;
                    text-align: center;
                    display: inline-block;
                    top: -18px;
                    left: 25px;
                  ">{{criticalSerReq}}</p>
                <i style="font-size: 20px; margin-top: 18px; 
                  z-index: 999;
                  transform: rotate(23deg);" class="fas fa-bolt" title="Critical Service Requests"></i>
              </a>
            </div>

            <a class="btn" style="min-height: 25px;width: 90px; padding: 0; background: lightgray;border: solid 0.2px;"
              (click)="onCalenderFilter(calenderLst[0])" #MNTHS3>3 Months</a>
            <a class=" btn"
              style="min-height: 25px;width: 90px; padding: 0; background: lightgray;border-top: solid 0.2px;border-bottom: solid 0.2px;"
              (click)="onCalenderFilter(calenderLst[1])" #MNTHS6>6 Months</a>
            <a class=" btn" style="min-height: 25px;width: 90px; padding: 0; background: lightgray;border: solid 0.2px;"
              (click)="onCalenderFilter(calenderLst[2])" #MNTHS12>12 Months</a>
          </div>
        </div>
        <hr style=" margin-top: 0.5rem;">
        <div class="row row-sm mg-b-20">
          <div style="visibility: hidden" id="SERCR" class="col-lg-7 ht-lg-100p">
            <div class="card card-dashboard-one">
              <div class="card-header">
                <div>
                  <h6 class="card-title"> <a routerLink="/servicecontractrevenuereport">Service Contract Revenue</a>
                  </h6>
                </div>
                <div class="btn-group">
                </div>
              </div><!-- card-header -->
              <div class="card-body">
                <div class="card-body-top">
                  <div>
                    <label class="mg-b-0">AMC</label>
                    <h2>${{amcRevenue}}</h2>
                  </div>
                  <div>
                    <label class="mg-b-0">Preventive</label>
                    <h2>${{preventiveRevenue}}</h2>
                  </div>
                  <div>
                    <label class="mg-b-0">BreakDown</label>
                    <h2>${{breakdownRevenue}}</h2>
                  </div>
                  <div>
                    <label class="mg-b-0">On Call</label>
                    <h2>${{oncallRevenue}}</h2>
                  </div>
                  <div>
                    <label class="mg-b-0">Planned</label>
                    <h2>${{plannedRevenue}}</h2>
                  </div>
                </div><!-- card-body-top -->
                <div class="flot-chart-wrapper" style="margin-top: 6%;">
                  <div id="flotChart" style="height:300px;" class="flot-chart"></div>
                </div><!-- flot-chart-wrapper -->
              </div><!-- card-body -->
            </div><!-- card -->
          </div>
          <div style="visibility: hidden" id="SERII" class="col-lg-5 mg-t-20 mg-lg-t-0">
            <div class="row row-sm">
              <div class="col-sm-6">
                <div class="card card-dashboard-two">
                  <div class="card-header" style='margin-bottom: 11%;'>
                    <h6>{{sRRaised}}</h6>
                    <p><a routerLink="/servicerequestlist"> Service Request Raised</a> </p>
                  </div><!-- card-header -->
                  <div class="card-body">
                    <div class="chart-wrapper">
                      <div id="flotChart1" class="flot-chart"></div>
                    </div><!-- chart-wrapper -->
                  </div><!-- card-body -->
                </div><!-- card -->
              </div><!-- col Service Request Raised -->
              <div class="col-sm-6 mg-t-20 mg-sm-t-0">
                <div class="card card-dashboard-two">
                  <div class="card-header">
                    <h5>Instruments</h5>
                    <div class="row">
                      <div class="col-md-6" style="padding-right: 0;">
                        <h6 style="font-size: 18px;">{{instrumnetInstalled}}</h6>
                        <p>Installed</p>
                      </div>
                      <div class="col-md-6" style="padding: 0;">
                        <h6 style="font-size: 18px;">{{instrumnetUnderService}}</h6>
                        <p>Under Contract</p>
                      </div>
                    </div>
                  </div><!-- card-header -->
                  <div class="card-body">
                    <div class="chart-wrapper">
                      <div id="flotChart2" class="flot-chart "></div>
                    </div><!-- chart-wrapper -->
                  </div><!-- card-body -->
                </div><!-- card -->
              </div><!-- col Instruments Installed -->
              <div class="col-sm-12 mg-t-15">
                <div class="card card-dashboard-three">
                  <div class="card-header" style="max-width: 100%;text-transform: none !important; font-size: 16px;">
                    <p>Instruments With Highest Service Request</p>
                    <h6>{{insHighestSReq}}</h6>

                  </div><!-- card-header -->
                  <div class="card-body pt-4">
                    <div class="chart" id="insHighestSerReq">
                      <canvas id="chartBar5"></canvas>
                    </div>
                  </div>
                </div>
              </div> <!-- col Instruments With Highest Service Request -->
            </div><!-- row -->
          </div>

        </div><!-- row -->

        <div class="row row-sm mg-b-20">

          <div style="visibility: hidden" id="EHSRQ" class="col-lg-4">
            <div class="card card-dashboard-pageviews" style="height: 500px;overflow: auto;">
              <div class="card-header">
                <h6 class="card-title"> Service Request Inprogress</h6>
              </div><!-- card-header -->
              <div class="card-body">
                <div *ngFor="let x of engHandlingReq" class="az-list-item">

                  <div>
                    <h6>{{x.engName}}</h6><span>{{x.custName}}</span>
                  </div>

                  <div>
                    <h6 class="tx-primary">{{x.engAssignedToCust}}</h6><span>{{x.engCustPercent}}%</span>
                  </div>

                </div><!-- list-group-item -->
              </div><!-- card-body -->
            </div><!-- card -->

          </div><!-- col -->
          <div style="visibility: hidden" id="RCUST" class="col-lg-8 mg-t-20 mg-lg-t-0">
            <div class="card card-dashboard-four">
              <div class="card-header">
                <h6 class="card-title">Revenue by Customer</h6>
              </div><!-- card-header -->
              <div class="card-body row">
                <div class="col-md-6 d-flex align-items-center">
                  <div class="chart" id="revenueByCustomer">
                    <canvas id="chartDonut"></canvas>
                  </div>
                </div><!-- col -->
                <div class="col-md-6 col-lg-5 mg-lg-l-auto mg-t-20 mg-md-t-0">
                  <div class="az-traffic-detail-item" *ngFor="let i of customerRevenueList;let index = index">
                    <div>
                      <span> {{i.customer.custname}}</span>
                      <span>{{i.total | currency}}<span> ({{((i.total/totalRevenue)*100) | number:'1.0-2'
                          }}%)</span></span>
                    </div>

                    <div class="progress">
                      <div class="progress-bar" [style.width]="((i.total/totalRevenue)*100)+'%'"
                        [style.background]="customerRevenueBgColors[index] + '!important'" role="progressbar"
                        aria-valuemin="0" aria-valuemax="100"></div>
                    </div><!-- progress -->
                  </div>

                </div><!-- col -->
              </div><!-- card-body -->
            </div><!-- card-dashboard-four -->
          </div><!-- col -->

        </div><!-- row -->
      </div><!-- az-content-body -->
    </div>
  </div><!-- az-content -->
</layout>